<!-- index.html -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Multirun Harvesting Overview</title>

    <!-- CSS -->
    <link href="/cmsDbMultiRunHarvesting/static/css/external/bootstrap.min.css" rel="stylesheet">
    <link href="/cmsDbMultiRunHarvesting/static/css/custom.css" rel="stylesheet">

    <!-- JS -->
    <script src="/cmsDbMultiRunHarvesting/static/js/external/jquery.min.js"></script>
    <script src="/cmsDbMultiRunHarvesting/static/js/external/bootstrap.min.js"></script>
    <script src="/cmsDbMultiRunHarvesting/static/js/external/angular.min.js"></script>
    <script src="/cmsDbMultiRunHarvesting/static/js/external/ui-bootstrap-tpls-2.2.0.js"></script>
    <script src="/cmsDbMultiRunHarvesting/static/js/index.js"></script>

</head>


<body class="mhbody" ng-app="multirunApp" ng-controller="multirunController as mh">

<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                    aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#" ng-click="mh.refreshPage()">Multi-run Harvesting Overview</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
                <li ng-click="mh.switchMultirunView()">
                    <a href="#">{{ mh.splitButtonText() }}</a>
                </li>
                <li ng-click="mh.showAbout=true"><a href="#about">About</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                       aria-expanded="true">Legend <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li ng-repeat="(state, color) in mh.stateColors" style="background-color: {{ color }}">
                            <a href="#">{{ state }}</a>
                        </li>
                    </ul>
                </li>
                <li id="searchli">
                    <form class="navbar-form navbar-left" id="searchnavbar">
                        <div class="form-group">
                            <input type="text" id="mrunsearchform" class="form-control" placeholder="Filter"
                                   ng-model="mh.filterMultiruns">
                        </div>
                    </form>
                </li>
            </ul>
        </div><!--/.nav-collapse -->
    </div>
</nav>

<div class="container tabcontainer">

    <div ng-if="mh.showAbout === false">
        <span ng-if="mh.splitByWorkflows == true">
            <span ng-init="mh.getMultirunsByWorkflow()"></span>

            <div class="multiruntab" ng-repeat="(workflow, multiruns) in mh.multirunsByWorkflow">

                <h2>{{ workflow }}</h2>
                <div ng-include="'/cmsDbMultiRunHarvesting/static/templates/mtable.html'"></div>

            </div>
        </span>

        <span ng-if="mh.splitByWorkflows == false">
            <span ng-init="mh.getMultiruns()"></span>

            <div class="multiruntab" ng-include="'/cmsDbMultiRunHarvesting/static/templates/mtable.html'"></div>
        </span>

        <div class="centeredPag">
            <ul uib-pagination
                total-items="mh.totalItems" ng-model="mh.currentPage"
                ng-change="mh.pageChanged()" items-per-page="mh.itemsPerPage"
                boundary-links="true" rotate="true" force-ellipses="true"
                max-size="9" previous-text="&lsaquo;" next-text="&rsaquo;"
                first-text="&laquo;" last-text="&raquo;"
                boundary-link-numbers="true">
            </ul>
        </div>

        <div class="itemsFormDiv">
            <span>Items per page:</span>
            <input type="text" class="itemsPerPageForm" ng-model="mh.itemsPerPage" ng-change="mh.pageChanged()">
        </div>

    </div>

    <div ng-show="mh.showAbout === true">
        <span ng-include="'/cmsDbMultiRunHarvesting/static/templates/about.html'"></span>
    </div>
</div>
</body>
</html>